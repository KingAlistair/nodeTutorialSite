<div id="main">
    <h1>2. REST API</h1><br>
    <p>A REST API (Representational State Transfer API) is a web-based application
        programming interface (API) that uses HTTP methods like GET, POST, PUT, DELETE,
        etc. to interact with resources (data) on a web server. REST is a design architecture
        for building networked applications.</p><br>

    <h2><b>API conventions</b></h3>
        <p><b>1. Order by the type of request!</b></p>
        <p><b>2. Endpoints are always plural!</b></p>

        <image src="/assets/images/restAPI.jpg" class="center"></image><br><br>

        <p><b>Copy the code to your app.js file</b></p>  
        <p>In the next code example, we have 5 endpoints you can try out to manage data </p>
        <p>You can try the GET methods in your browser or you can download <a href="https://www.postman.com/downloads/">Postman</a> to try them all.</p>

        <pre><code class="language-javascript">app.use(express.json()); //Allows saving in json format.
        
//Get all songs
app.get("/songs", (req, res) => {
res.send({"Songs:": songs});
});

//Get song by id
app.get("/songs/:id", (req, res) => {
const songChosen = songs.find(song => song.id === Number(req.params.id));
res.send({"Chosen song": songChosen});
});

//Create a new song
let currentId = 3;
app.post("/songs", (req, res) => {
const newSong = req.body;
currentId++;
newSong.id = currentId;
songs.push(newSong);
res.send({"New song": newSong});
});

//Update song by id
app.put("/songs/:id", (req, res) => {
const foundIndex = songs.findIndex(song => song.id === Number(req.params.id));
if (foundIndex !== -1) {
    const foundSong = songs[foundIndex];
    songs[foundIndex] = {...foundSong, ...req.body, id: foundSong.id};
    res.send({"Song updated": songs[foundIndex]});
} else {
    res.status(404).send({ "Error": "Song was not found with id " + req.params.id });
}
});

//Delete song by id
app.delete("/songs/:id", (req, res) => {
const index = songs.findIndex(song => song.id === Number(req.params.id));
if (index !== -1) {
    songs.splice(index, 1);
    res.json({ message: "Song was deleted" });
} else {
    res.send({ "Error": "Song was not found with id " + req.params.id });
}
});

//Data
const songs = [{
"id": 1,
"Band": "Beatles",
"Album": "Abbey Road",
"Song": "Come Together"
}, {
"id": 2,
"Band": "A-ha",
"Album": "Hunting High and Low",
"Song": "Take On Me"
}, {
"id": 3,
"Band": "Tenacious D",
"Album": "The Pick of Destiny",
"Song": "Kickapoo"
}];
</code></pre><br><br>


        <div class="nav-buttons">
            <div class="left-button">
                <a href="/firstServer"><span><i class="material-icons">keyboard_double_arrow_left</i><span
                            class="icon-text"></span></a><br>
            </div>
            <div class="rigt-button">
                <a href="/fetch"><span><i class="material-icons">keyboard_double_arrow_right</i><span
                            class="icon-text"></span></a><br>
            </div>
        </div>
</div>